<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="stylesheet" href="api-football.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
        <!-- Google AdSense -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>
    </head>
    <body>
        <header>
            <h1><a href="index.html"><i class="fas fa-arrow-right"></i> Ø±Ø¬ÙˆØ¹</a></h1>
        </header>

        <div id="match-details-container">
            <div class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©...</div>
        </div>

        <div class="ad-container">
            <!-- Google AdSense -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                 data-ad-slot="XXXXXXXXXX"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <footer>
            <div class="footer-links">
                <a href="privacy.html">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                <a href="terms.html">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a>
                <a href="about.html">Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹</a>
            </div>
            <div class="copyright">
                &copy; 2023 Ù„ÙŠØ¬Ø§ Ø´ÙˆØª. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.
            </div>
        </footer>

        <script>
            // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
            async function fetchMatchDetails() {
                const fixtureId = new URLSearchParams(window.location.search).get('id');
                if (!fixtureId) {
                    document.getElementById('match-details-container').innerHTML = 
                        '<div class="error">Ù„Ù… ÙŠØªÙ… ØªÙˆÙÙŠØ± Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</div>';
                    return;
                }

                const apiKey = '376800a4f1a5582465b88e9c37d3f326';
                const url = `https://v3.football.api-sports.io/fixtures?id=${fixtureId}`;
                
                try {
                    const response = await fetch(url, {
                        headers: {
                            'x-rapidapi-key': apiKey,
                            'x-rapidapi-host': 'v3.football.api-sports.io'
                        }
                    });
                    const data = await response.json();
                    displayMatchDetails(data.response[0]);
                } catch (error) {
                    console.error('Error fetching match details:', error);
                    document.getElementById('match-details-container').innerHTML = 
                        '<div class="error">ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.</div>';
                }
            }

            // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
            function displayMatchDetails(match) {
                const container = document.getElementById('match-details-container');
                const matchDate = new Date(match.fixture.timestamp * 1000);
                const matchTime = matchDate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                const matchDateFormatted = matchDate.toLocaleDateString('ar-EG');

                // ØªØ­Ø¶ÙŠØ± Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
                let eventsHtml = '';
                if (match.events && match.events.length > 0) {
                    eventsHtml = '<h3><i class="fas fa-list"></i> Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</h3><div class="events-container">';
                    match.events.forEach(event => {
                        eventsHtml += `
                            <div class="event">
                                <span class="event-time">${event.time.elapsed}'</span>
                                <span class="event-type ${event.type.toLowerCase()}">${getEventTypeInArabic(event.type)}</span>
                                <span class="event-team">${event.team.name}</span>
                                <span class="event-player">${event.player.name}</span>
                                ${event.detail === 'Normal Goal' ? 'âš½' : ''}
                                ${event.detail === 'Yellow Card' ? 'ğŸŸ¨' : ''}
                                ${event.detail === 'Red Card' ? 'ğŸŸ¥' : ''}
                                ${event.detail === 'Penalty' ? 'âï¸' : ''}
                            </div>
                        `;
                    });
                    eventsHtml += '</div>';
                }

                // ØªØ­Ø¶ÙŠØ± Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
                let statsHtml = '';
                if (match.statistics && match.statistics.length > 0) {
                    statsHtml = '<h3><i class="fas fa-chart-bar"></i> Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</h3><div class="stats-container">';
                    
                    const homeStats = match.statistics.find(s => s.team.id === match.teams.home.id);
                    const awayStats = match.statistics.find(s => s.team.id === match.teams.away.id);
                    
                    if (homeStats && awayStats) {
                        statsHtml += `
                            <table>
                                <thead>
                                    <tr>
                                        <th>Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ©</th>
                                        <th>${match.teams.home.name}</th>
                                        <th>${match.teams.away.name}</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;
                        
                        const importantStats = ['Total Shots', 'Shots on Goal', 'Shots off Goal', 'Shots Insidebox', 
                                              'Shots Outsidebox', 'Ball Possession', 'Corner Kicks', 'Fouls', 
                                              'Goalkeeper Saves', 'Passes accurate', 'Passes %'];
                        
                        homeStats.statistics.forEach((stat, index) => {
                            const awayStat = awayStats.statistics[index];
                            if (importantStats.includes(stat.type)) {
                                statsHtml += `
                                    <tr>
                                        <td>${getStatInArabic(stat.type)}</td>
                                        <td>${stat.value}</td>
                                        <td>${awayStat.value}</td>
                                    </tr>
                                `;
                            }
                        });
                        
                        statsHtml += `
                                </tbody>
                            </table>
                        `;
                    }
                    
                    statsHtml += '</div>';
                }

                container.innerHTML = `
                    <div class="match-details-card">
                        <div class="league-info">
                            <img src="${match.league.logo}" alt="${match.league.name}" class="league-logo" loading="lazy">
                            <span>${match.league.name} - ${match.league.round}</span>
                        </div>
                        
                        <div class="match-header">
                            <div class="match-date"><i class="far fa-calendar-alt"></i> ${matchDateFormatted} - ${matchTime}</div>
                            <div class="match-venue"><i class="fas fa-map-marker-alt"></i> ${match.fixture.venue.name}, ${match.fixture.venue.city}</div>
                            <div class="match-status ${getStatusClass(match.fixture.status.short)}">
                                ${getStatusInArabic(match.fixture.status.long)}
                            </div>
                        </div>
                        
                        <div class="teams-details">
                            <div class="team-detail home-team">
                                <img src="${match.teams.home.logo}" alt="${match.teams.home.name}" class="team-logo-large" loading="lazy">
                                <span class="team-name">${match.teams.home.name}</span>
                                <span class="team-score">${match.goals.home}</span>
                            </div>
                            
                            <div class="vs-details">
                                <span>VS</span>
                            </div>
                            
                            <div class="team-detail away-team">
                                <span class="team-score">${match.goals.away}</span>
                                <img src="${match.teams.away.logo}" alt="${match.teams.away.name}" class="team-logo-large" loading="lazy">
                                <span class="team-name">${match.teams.away.name}</span>
                            </div>
                        </div>
                        
                        ${eventsHtml}
                        ${statsHtml}
                        
                        <div class="match-officials">
                            <h3><i class="fas fa-whistle"></i> Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</h3>
                            <div class="referees">
                                ${match.fixture.referee ? `<div><i class="fas fa-user"></i> Ø§Ù„Ø­ÙƒÙ…: ${match.fixture.referee}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }

            // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙƒÙ„Ø§Ø³ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
            function getStatusClass(status) {
                const statusMap = {
                    'FT': 'finished',
                    'HT': 'inprogress',
                    '1H': 'inprogress',
                    '2H': 'inprogress',
                    'NS': 'scheduled',
                    'PST': 'postponed',
                    'CANC': 'cancelled'
                };
                return `status-${statusMap[status] || 'scheduled'}`;
            }

            // Ø¯Ø§Ù„Ø© Ù„ØªØ±Ø¬Ù…Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
            function getStatusInArabic(status) {
                const statusMap = {
                    'Match Finished': 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©',
                    'First Half': 'Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø£ÙˆÙ„',
                    'Halftime': 'Ø§Ø³ØªØ±Ø§Ø­Ø©',
                    'Second Half': 'Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø«Ø§Ù†ÙŠ',
                    'Not Started': 'Ù„Ù… ØªØ¨Ø¯Ø£ Ø¨Ø¹Ø¯',
                    'Match Postponed': 'Ù…Ø¤Ø¬Ù„Ø©',
                    'Match Cancelled': 'Ù…Ù„ØºØ§Ø©'
                };
                return statusMap[status] || status;
            }

            // Ø¯Ø§Ù„Ø© Ù„ØªØ±Ø¬Ù…Ø© Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¯Ø«
            function getEventTypeInArabic(type) {
                const typeMap = {
                    'Goal': 'Ù‡Ø¯Ù',
                    'Card': 'Ø¨Ø·Ø§Ù‚Ø©',
                    'subst': 'ØªØ¨Ø¯ÙŠÙ„'
                };
                return typeMap[type] || type;
            }

            // Ø¯Ø§Ù„Ø© Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            function getStatInArabic(stat) {
                const statMap = {
                    'Total Shots': 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ³Ø¯ÙŠØ¯Ø§Øª',
                    'Shots on Goal': 'ØªØ³Ø¯ÙŠØ¯Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ù…Ù‰',
                    'Shots off Goal': 'ØªØ³Ø¯ÙŠØ¯Ø§Øª Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø±Ù…Ù‰',
                    'Shots Insidebox': 'ØªØ³Ø¯ÙŠØ¯Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚',
                    'Shots Outsidebox': 'ØªØ³Ø¯ÙŠØ¯Ø§Øª Ø®Ø§Ø±Ø¬ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚',
                    'Ball Possession': 'Ø§Ù„Ø§Ø³ØªØ­ÙˆØ§Ø°',
                    'Corner Kicks': 'Ø±ÙƒÙ†ÙŠØ§Øª',
                    'Fouls': 'Ø£Ø®Ø·Ø§Ø¡',
                    'Goalkeeper Saves': 'ØªØµØ¯ÙŠØ§Øª Ø§Ù„Ø­Ø§Ø±Ø³',
                    'Passes accurate': 'ØªÙ…Ø±ÙŠØ±Ø§Øª Ù†Ø§Ø¬Ø­Ø©',
                    'Passes %': 'Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ±Ø§Øª'
                };
                return statMap[stat] || stat;
            }

            // Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            document.addEventListener('DOMContentLoaded', fetchMatchDetails);
        </script>
    </body>
</html>
