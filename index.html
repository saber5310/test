<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title> ليجــــــا شوت </title>
        <link rel="stylesheet" href="api-football.css">
      <!-- Google AdSense -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>
        <style>
            /* التنسيقات الجديدة */
            .country-tabs {
                display: flex;
                justify-content: center;
                margin: 15px 0;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .country-tab {
                padding: 8px 16px;
                background-color: #f0f0f0;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
                transition: all 0.3s;
                color: black;
            }
            
            .country-tab:hover {
                background-color: #ddd;
            }
            
            .country-tab.active {
                background-color: #3f51b5;
                color: white;
            }
            
            .dropdown {
                position: relative;
                display: inline-block;
            }
            
            .dropdown-btn {
                padding: 8px 16px;
                background-color: #f0f0f0;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
                color: black;
            }
            
            .dropdown-content {
                display: none;
                position: absolute;
                background-color: #f9f9f9;
                min-width: 160px;
                box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                z-index: 1;
                border-radius: 4px;
                max-height: 300px;
                overflow-y: auto;
            }
            
            .dropdown-content a {
                color: black;
                padding: 8px 12px;
                text-decoration: none;
                display: block;
            }
            
            .dropdown-content a:hover {
                background-color: #f1f1f1;
            }
            
            .dropdown:hover .dropdown-content {
                display: block;
            }
            
            /* بقية التنسيقات كما هي */
            #tabs {
                display: flex;
                justify-content: center;
                margin: 15px 0;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .tab-button {
                padding: 8px 16px;
                background-color: #f0f0f0;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
                transition: all 0.3s;
                color: black;
            }
            
            .tab-button:hover {
                background-color: #ddd;
            }
            
            .tab-button.active {
                background-color: #4CAF50;
                color: white;
            }
            
            .match-card {
                color: black;
                margin-bottom: 15px;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
            
            .team-name, .vs, .score, .match-time, .match-venue {
                color: black !important;
            }
            
            .match-status {
                color: white !important;
                padding: 5px;
                text-align: center;
                font-weight: bold;
            }
            
            .status-finished {
                background-color: #4CAF50;
            }
            
            .status-inprogress {
                background-color: #2196F3;
            }
            
            .status-scheduled {
                background-color: #ff9800;
            }
            
            .status-cancelled {
                background-color: #f44336;
            }
            
            .status-postponed {
                background-color: #9e9e9e;
            }
            
            .date-header {
                text-align: center;
                font-size: 1.3em;
                margin: 20px 0;
                color: #333;
                font-weight: bold;
            }
            
            .league-header {
                color: black;
                font-weight: bold;
                margin: 15px 0 8px 0;
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 12px 15px;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                background-color: #f8f9fa;
            }
            
            .league-info {
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .league-logo {
                width: 24px;
                height: 24px;
                object-fit: contain;
            }
            
            .league-name {
                font-size: 1.1em;
                font-weight: bold;
            }
            
            .league-type {
                font-size: 0.9em;
                color: #6c757d;
                background-color: #e9ecef;
                padding: 2px 8px;
                border-radius: 12px;
            }
            
            .country-info {
                display: flex;
                align-items: center;
                gap: 8px;
            }
            
            .country-name {
                font-size: 1em;
                font-weight: bold;
                color: #2c7be5;
            }
            
            .country-flag {
                width: 24px;
                height: 18px;
                border-radius: 3px;
                box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            }
            
            .no-matches {
                text-align: center;
                padding: 20px;
                font-size: 1.2em;
                color: #6c757d;
            }
            
            .teams {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 15px;
                background-color: white;
            }
            
            .team {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 30%;
            }
            
            .team-logo {
                width: 40px;
                height: 40px;
                margin-bottom: 5px;
            }
            
            .vs {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 30%;
            }
            
            .score {
                font-weight: bold;
                font-size: 1.2em;
                margin-bottom: 5px;
            }
            
            .match-info {
                display: flex;
                justify-content: space-between;
                padding: 8px 15px;
                background-color: #f5f5f5;
                font-size: 0.9em;
            }
        </style>
    </head>
    <body>
        <h1> ليجــــــا شـــوت </h1>
        
        <!-- تبويبات الدول -->
        <div class="country-tabs" id="country-tabs">
            <button class="country-tab active" onclick="filterByCountry('all')">الكل</button>
            <button class="country-tab" onclick="filterByCountry('Egypt')">مصر</button>
            <button class="country-tab" onclick="filterByCountry('England')">إنجلترا</button>
            <button class="country-tab" onclick="filterByCountry('Spain')">إسبانيا</button>
            <button class="country-tab" onclick="filterByCountry('Germany')">ألمانيا</button>
            <button class="country-tab" onclick="filterByCountry('Italy')">إيطاليا</button>
            
            <!-- القائمة المنسدلة للدول الأخرى -->
            <div class="dropdown">
                <button class="dropdown-btn">دول أخرى ▼</button>
                <div class="dropdown-content">
                    <a href="#" onclick="filterByCountry('France')">فرنسا</a>
                    <a href="#" onclick="filterByCountry('Portugal')">البرتغال</a>
                    <a href="#" onclick="filterByCountry('Netherlands')">هولندا</a>
                    <a href="#" onclick="filterByCountry('Belgium')">بلجيكا</a>
                    <a href="#" onclick="filterByCountry('Turkey')">تركيا</a>
                    <a href="#" onclick="filterByCountry('Russia')">روسيا</a>
                    <a href="#" onclick="filterByCountry('Morocco')">المغرب</a>
                    <a href="#" onclick="filterByCountry('Algeria')">الجزائر</a>
                    <a href="#" onclick="filterByCountry('Tunisia')">تونس</a>
                    <a href="#" onclick="filterByCountry('Saudi Arabia')">السعودية</a>
                    <a href="#" onclick="filterByCountry('Qatar')">قطر</a>
                    <a href="#" onclick="filterByCountry('UAE')">الإمارات</a>
                </div>
            </div>
        </div>
        
        <!-- تبويبات حالة المباريات -->
        <div id="tabs">
            <button class="tab-button active" onclick="filterMatches('all')">الكل</button>
            <button class="tab-button" onclick="filterMatches('inprogress')">جارية</button>
            <button class="tab-button" onclick="filterMatches('scheduled')">قادمة</button>
            <button class="tab-button" onclick="filterMatches('finished')">منتهية</button>
            <button class="tab-button" onclick="filterMatches('cancelled')">ملغاة</button>
        </div>
        
        <div id="matches-container"></div>

        <footer>
            <div class="footer-links">
                <a href="privacy.html">سياسة الخصوصية</a>
                <a href="terms.html">شروط الاستخدام</a>
                <a href="about.html">عن الموقع</a>
            </div>
            <div class="copyright">
                &copy; 2023 ليجا شوت. جميع الحقوق محفوظة.
            </div>
        </footer>

        <script>
            // تخزين المباريات بشكل عام للتصفية لاحقاً
            let allMatches = [];
            let currentCountryFilter = 'all';
            let currentStatusFilter = 'all';
            
            // دالة للحصول على التاريخ الحالي وتنسيقه
            function getCurrentDate() {
                const today = new Date();
                const year = today.getFullYear();
                const month = String(today.getMonth() + 1).padStart(2, '0');
                const day = String(today.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }

            // دالة لجلب بيانات المباريات
            async function fetchMatches() {
                const currentDate = getCurrentDate();
                const apiKey = '376800a4f1a5582465b88e9c37d3f326';
                const url = `https://v3.football.api-sports.io/fixtures?date=${currentDate}`;
                
                try {
                    const response = await fetch(url, {
                        headers: {
                            'x-rapidapi-key': apiKey,
                            'x-rapidapi-host': 'v3.football.api-sports.io'
                        }
                    });
                    const data = await response.json();
                    allMatches = data.response || [];
                    applyFilters();
                } catch (error) {
                    console.error('Error fetching matches:', error);
                    document.getElementById('matches-container').innerHTML = 
                        '<div class="error">فشل تحميل المباريات. يرجى المحاولة لاحقاً.</div>';
                }
            }

            // دالة التصفية حسب الدولة
            function filterByCountry(country) {
                currentCountryFilter = country;
                
                // تحديث الأزرار النشطة
                document.querySelectorAll('.country-tab').forEach(button => {
                    button.classList.remove('active');
                });
                event.target.classList.add('active');
                
                applyFilters();
            }

            // دالة التصفية حسب حالة المباراة
            function filterMatches(status) {
                currentStatusFilter = status;
                
                // تحديث الأزرار النشطة
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.classList.remove('active');
                });
                event.target.classList.add('active');
                
                applyFilters();
            }

            // دالة تطبيق الفلاتر
            function applyFilters() {
                let filteredMatches = allMatches;
                
                // التصفية حسب الدولة
                if (currentCountryFilter !== 'all') {
                    filteredMatches = filteredMatches.filter(match => 
                        match.league.country === currentCountryFilter
                    );
                }
                
                // التصفية حسب الحالة
                if (currentStatusFilter !== 'all') {
                    filteredMatches = filteredMatches.filter(match => {
                        const matchStatus = getStatusClass(match.fixture.status.short);
                        return matchStatus === `status-${currentStatusFilter}`;
                    });
                }
                
                displayMatches(filteredMatches);
            }

            // دالة لعرض المباريات على شكل كروت
            function displayMatches(matches) {
                const container = document.getElementById('matches-container');
                
                if (!matches || matches.length === 0) {
                    container.innerHTML = '<div class="no-matches">لا توجد مباريات لهذا اليوم.</div>';
                    return;
                }
                
                // تجميع المباريات حسب الدوري
                const matchesByLeague = {};
                matches.forEach(match => {
                    const leagueName = match.league.name;
                    if (!matchesByLeague[leagueName]) {
                        matchesByLeague[leagueName] = [];
                    }
                    matchesByLeague[leagueName].push(match);
                });
                
                // عرض المباريات
                let html = `<div class="date-header">مباريات يوم ${getCurrentDate()}</div>`;
                
                for (const league in matchesByLeague) {
                    // الحصول على بيانات البطولة والدولة
                    const firstMatch = matchesByLeague[league][0];
                    const country = firstMatch.league.country;
                    const countryFlag = firstMatch.league.flag || '';
                    const leagueLogo = firstMatch.league.logo || '';
                    const leagueType = firstMatch.league.type || 'بطولة';
                    
                    html += `
                        <div class="league-header">
                            <div class="league-info">
                                ${leagueLogo ? `<img src="${leagueLogo}" alt="${league}" class="league-logo">` : ''}
                                <span class="league-name">${league}</span>
                                <span class="league-type">${leagueType}</span>
                            </div>
                            <div class="country-info">
                                ${countryFlag ? `<img src="${countryFlag}" alt="${country}" class="country-flag">` : ''}
                                <span class="country-name">${country}</span>
                            </div>
                        </div>`;
                    
                    matchesByLeague[league].forEach(match => {
                        const matchTime = new Date(match.fixture.timestamp * 1000).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                        const statusClass = getStatusClass(match.fixture.status.short);
                        
                        html += `
                            <div class="match-card ${statusClass}" onclick="openMatchDetails(${match.fixture.id})">
                                <div class="teams">
                                    <div class="team">
                                        <img src="${match.teams.home.logo}" alt="${match.teams.home.name}" class="team-logo">
                                        <span class="team-name">${match.teams.home.name}</span>
                                    </div>
                                    <div class="vs">
                                        <div class="score">${match.goals.home} - ${match.goals.away}</div>
                                        <div>VS</div>
                                    </div>
                                    <div class="team">
                                        <img src="${match.teams.away.logo}" alt="${match.teams.away.name}" class="team-logo">
                                        <span class="team-name">${match.teams.away.name}</span>
                                    </div>
                                </div>
                                <div class="match-info">
                                    <span class="match-time">${matchTime}</span>
                                    <span class="match-venue">${match.fixture.venue.name}</span>
                                </div>
                                <div class="match-status ${statusClass}">
                                    ${match.fixture.status.long}
                                </div>
                            </div>
                        `;
                    });
                }
                
                container.innerHTML = html;
            }

            // دالة لفتح تفاصيل المباراة في صفحة جديدة
            function openMatchDetails(fixtureId) {
                window.open(`match-details.html?id=${fixtureId}`, '_blank');
            }

            // دالة للحصول على كلاس حالة المباراة
            function getStatusClass(status) {
                const statusMap = {
                    'FT': 'finished',
                    'HT': 'inprogress',
                    '1H': 'inprogress',
                    '2H': 'inprogress',
                    'ET': 'inprogress',
                    'BT': 'inprogress',
                    'P': 'inprogress',
                    'SUSP': 'inprogress',
                    'INT': 'inprogress',
                    'NS': 'scheduled',
                    'TBD': 'scheduled',
                    'PST': 'postponed',
                    'CANC': 'cancelled',
                    'ABD': 'cancelled',
                    'AWD': 'cancelled',
                    'WO': 'cancelled'
                };
                return `status-${statusMap[status] || 'scheduled'}`;
            }

            // جلب المباريات عند تحميل الصفحة
            document.addEventListener('DOMContentLoaded', fetchMatches);
        </script>
    </body>
</html>
